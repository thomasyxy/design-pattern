<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>电灯程序</title>
  </head>
  <body>
    <script type="text/javascript">
      var Light = function(){
        this.state = 'off';
        this.button = null;
      };

      Light.prototype.init = function(){
        var button = document.createElement('button'),
            self = this;

        button.innerHTML = '开关';
        this.button = document.body.appendChild(button);
        this.button.onclick = function(){
          self.buttonWasPressed();
        }
      };

      Light.prototype.buttonWasPressed = function(){
        if(this.state === 'off'){
          console.log('开灯');
          this.state = 'on';
        }else if(this.state === 'on'){
          console.log('关灯');
          this.state = 'off';
        }
      };

      var light = new Light();
      light.init();
    </script>
  </body>
</html>
